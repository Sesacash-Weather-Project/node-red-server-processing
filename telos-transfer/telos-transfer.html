<! -- Placeholder for telos-eosio Node-Red html file -->

<script type="text/javascript">
    RED.nodes.registerType('telos-transfer',{
        category: 'blockchain',
        color: '#a6bbcf',
        defaults: {
            blockchain: {value:"testnet", required: true},
            chainid: {value:"1eaa0824707c8c16bd25145493bf062aecddfeb56c736f6ba6397f3195f33c9f", required: true},
            endpoint: {value:"api-testnet", required: true},
            privkey: {value:"", required: true}
        },
        inputs:1,
        outputs:0,
        icon: "icons/blocks.png",
        label: function() {
            return this.name||"telos-transfer";
        },
        oneditprepare: function(){
            $("#node-input-blockchain").change(function() {
                $("#node-input-endpoint").find('option').remove().end();  // Remove all API endpoint options
                var select = $("#node-input-blockchain option:selected").val();
                if (select == "mainnet"){
                    $("#node-input-endpoint").append("<option value='api-mainnet'> https://telos.caleos.io </option>");
                    $("#node-input-customendpoint-row").hide();
                    $("#node-input-chainid").prop('disabled',false);
                    $("#node-input-chainid").val("4667b205c6838ef70ff7988f6e8257e8be0e1284a2f59699054a018f743b1d11");
                    $("#node-input-chainid").prop('disabled',true);
                } else if (select == "testnet") {
                    $("#node-input-endpoint").append("<option value='api-testnet'> https://basho-api.telosuk.io  </option>");
                    $("#node-input-customendpoint-row").hide();
                    $("#node-input-chainid").prop('disabled',false);
                    $("#node-input-chainid").val("1eaa0824707c8c16bd25145493bf062aecddfeb56c736f6ba6397f3195f33c9f");
                    $("#node-input-chainid").prop('disabled',true);
                } else if (select == "other") {
                    $("#node-input-customendpoint-row").show();
                    $("#node-input-chainid").val("");
                    $("#node-input-chainid").prop('disabled',false);
                }
                $("#node-input-endpoint").append("<option value='api-other'> Other </option>"); // Always allow for Other blockchain

            });
            $("#node-input-endpoint").change(function() {
                var select = $("#node-input-endpoint option:selected").val();
                if (select == "api-other"){
                    $("#node-input-customendpoint-row").show();
                } else {
                    $("#node-input-customendpoint-row").hide();
                }
            });
        }
    });
</script>

<script type="text/html" data-template-name="telos-transfer">
    <div class="form-row">
        <label for="node-input-blockchain"><i class="icon-tag"></i> Eosio Blockchain</label>
        <select type="text" id="node-input-blockchain" style="display: inline-block; vertical-align: middle; width:60%;">
            <option value="testnet"> Telos Testnet (Basho) </option>
            <option value="mainnet"> Telos Mainnet</option>
            <option value="other"> Other</option>
        </select>
    </div>
    <div class="form-row" id="node-input-chainid-row">
        <label for="node-input-chainid"><i class="icon-tag"></i> Chain ID</label>
        <input type="text" id="node-input-chainid" placeholder="" disabled>
    </div>
    <div class="form-row">
        <label for="node-input-endpoint"><i class="icon-tag"></i> Http Endpoint</label>
        <select type="text" id="node-input-endpoint" style="display: inline-block; vertical-align: middle; width:60%;">
            <option value="api-testnet"> https://basho-api.telosuk.io </option>
            <option value="api-other"> Other</option>
        </select>
    </div>
    <div class="form-row" id="node-input-customendpoint-row">
        <label for="node-input-customendpoint"><i class="icon-tag"></i> Custom Endpoint</label>
        <input type="text" id="node-input-customendpoint" placeholder="http://localhost:8888">
    </div>
    <div class="form-row">
        <label for="node-input-privkey"><i class="icon-tag"></i> Private Key File</label>
        <input type="text" id="node-input-privkey" placeholder="">
    </div>
</script>

<script type="text/html" data-help-name="telos-transfer">
    <p>A node that sends telos-based tokens to a requested account.</p>
</script>
